<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>法诉关联分析</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<head th:include="layout :: htmlhead" th:with="title='法诉关联分析'"></head>
<!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<style>
.test1 {
      text-align:justify;
      text-justify:distribute-all-lines;/*ie6-8*/
      text-align-last:end;/* ie9*/
      -moz-text-align-last:justify;/*ff*/
      -webkit-text-align-last:justify;/*chrome 20+*/
  }
  @media screen and (-webkit-min-device-pixel-ratio:0){/* chrome*/
      .test1:after{
          display: inline-block;
          width:100%;
          overflow:hidden;
          height:0;
      }
  }
 .font-highlight{
     color: red;
    font-size: 24px;
    font-weight: 1000;
   }
</style>
<body>
<blockquote class="layui-elem-quote layui-text">
法诉关联查询示例
</blockquote>
	<div class="layui-container" style="margin-bottom: 60px;">
		<fieldset class="layui-elem-field layui-field-title"
			style="margin-top: 20px;">
		</fieldset>
		<div class="layui-row">
			<form class="layui-form" action="">
				<div class="layui-form-item" >
					<div class="layui-inline">
						<label class="layui-form-label">订单编号</label>
						<div class="layui-input-inline">
							<input type="text" name="applyNo"  autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">客户姓名</label>
						<div class="layui-input-inline">
							<input type="text" name="userName"  autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">证件号码</label>
						<div class="layui-input-inline">
							<input type="text" name="idCardNum" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<button class="layui-btn" lay-submit="" lay-filter="demo1">走起</button>
					</div>
				</div>
			</form>
		</div>
		<fieldset class="layui-elem-field layui-field-title"
			style="margin-top: 20px;">
		</fieldset>
		<div class="layui-row" id="infodataContainer">
		</div>
		<div class="layui-row" id="descdataContainer">
		</div>
	</div>
	<script id="infodata" type="text/x-jquery-tmpl"> 
		<table lay-filter="parse-table-demo" class="layui-col-md-offset1">
			  <tbody>
			    <tr>
			      <td class="test1" style="padding: 0px 10px;">客户姓名：</td>
			      <td id="brief_userName">${name}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px;">出生日期：</td>
			      <td id="brief_borDate">${bDate}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px;">性别：</td>
			      <td id="brief_sec">${gender}</td>
			    </tr>
			  </tbody>
		</table>
	</script>
	<script id="coredata" type="text/x-jquery-tmpl"> 
		<fieldset class="layui-elem-field layui-field-title"
			style="margin-top: 20px;">
		</fieldset>
			<table lay-filter="parse-table-demo" class="layui-col-md-offset1" style="margin-left: 40px;">
			  <tbody>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">标题：</td>
			      <td>${title}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">结案时间：</td>
			      <td>${finishDate}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">当事人姓名或名称：</td>
			      <td>${nameJug}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">证件名称：</td>
			      <td>${idNo}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">案号：</td>
			      <td>${caseNo}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">诉讼地位：</td>
			      <td>${roleType}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">审理机关：</td>
			      <td>${judgeOrg}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">文书类型：</td>
			      <td>${docType}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">涉案事由：</td>
			      <td>${caseReason}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">涉案金额：</td>
			      <td>${money}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">审理结果：</td>
			      <td>${judgeResult}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">审理程序：</td>
			      <td>${program}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">审理人员：</td>
			      <td>${judgeman}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">异议备注：</td>
			      <td>${notes}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">完整内容查看地址：</td>
			      <td>${docContentUri}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">原告当事人：</td>
			      <td>${plantiff}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">被告当事人：</td>
			      <td>${defendant}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">其他当事人：</td>
			      <td>${otherRole}</td>
			    </tr>
			    <tr>
			      <td class="test1" style="padding: 0px 10px; min-width: 126px;">案件内容：</td>
			      <td>{{html docContent}}</td>
			    </tr>
			  </tbody>
			</table>
	</script>
	<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
	<script>
		layui.use([ 'form', 'layedit', 'laydate' ],
			function() {
				var form = layui.form, layer = layui.layer;
				//监听提交
				form.on('submit(demo1)', function(data) {
					var paramArr = [];
					paramArr[0]=data.field.applyNo;
					paramArr[1]=data.field.userName;
					paramArr[2]=data.field.idCardNum;/*  */
					console.log(paramArr.join(","));
					$.ajax({
			              url:"getData",
			              type:'post',
			              data:{"input_data":paramArr.join(",")},
			              beforeSend:function () {
			                  this.layerIndex = layer.load(0, { shade: [0.5, '#393D49'] });
			              },
			              success:function(data){
			            	  console.log(data);
			            	  if(data.code != "200"){
			            		  layer.alert(data.message);
			            		  layer.close(this.layerIndex);
			            	  }
			            	  if(data){
			            		  var data = $.parseJSON( data.obj );
			            		  var infodatas = [];
			            		  infodatas[0]=data.userInfo;
			            		  $('#infodataContainer').empty();
			            		  $('#infodata').tmpl(infodatas).appendTo('#infodataContainer');
			            		  
			            		  var userDescs = data.userDesc;
			            		  for(doc in userDescs){
			            			  if(userDescs[doc].docContent){
			            				  userDescs[doc].docContent = userDescs[doc].docContent.replace(infodatas[0].name,"<span class=\"font-highlight\">"+infodatas[0].name+"</span>");
			            				  userDescs[doc].docContent = userDescs[doc].docContent.replace(infodatas[0].bDate,"<span class=\"font-highlight\">"+infodatas[0].bDate+"</span>");
			            				  userDescs[doc].docContent = userDescs[doc].docContent.replace(infodatas[0].gender,"<span class=\"font-highlight\">"+infodatas[0].gender+"</span>");
			            			  }
			            		  }
			            		  
			            		  $('#descdataContainer').empty();
			            		  $('#coredata').tmpl(userDescs).appendTo('#descdataContainer');
			            		  
			            		  /*  */
			            		  /*  var infodatas = [{ name: "124"},{ name: "124123"}];
			                      $('#infodata').tmpl(infodatas).appendTo('#infodataContainer');
			                      
			                      var users = [{ title: "123"}];
			                      $('#coredata').tmpl(users).appendTo('#descdataContainer'); */
			            	  }else{
			            		  layer.alert("查询数据为空");
			            	  }
			              },
			              complete: function () {
			                  layer.close(this.layerIndex);
			              },
			          });

			   	 	return false;
			   	 	
				});
		});
		
		 $(function () {
            // var users = [{ ID: '', Name: 'Joseph Chan', Ctrl: {x:"x"} }, { ID: 'aCloud', Name: 'Mary Cheung', Ctrl: {x:'<input type="text" value="Demo" />'}}];
           
             var infodatas = [{ name: ""}];
            $('#infodata').tmpl(infodatas).appendTo('#infodataContainer');
            
            var users = [{ docContent: "<span style=\"color: red;\"> </span>"}];
            $('#coredata').tmpl(users).appendTo('#descdataContainer');
           
        });
	</script>

</body>
</html>